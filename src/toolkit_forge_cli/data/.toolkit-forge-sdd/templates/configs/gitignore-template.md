# .gitignore Template for Forge Custom UI Apps

> **Template**: Copy this to `.gitignore` in your Forge app root

## Purpose

This `.gitignore` ensures that:
- Build artifacts (`static/*/build/`) are not committed
- Dependencies (`node_modules/`) are not committed
- Development files remain local
- Repository stays clean and lightweight

## When to Use

- ✅ **Always** for Custom UI apps using Vite/Webpack
- ✅ For any Forge app with frontend build process
- ⚠️ Adjust if using different build tools

---

## Template Content

```gitignore
# ============================================
# Forge Custom UI - Build Artifacts
# ============================================

# Build output directories
# CRITICAL: static/*/build/ contains compiled frontend assets
# These are generated by 'npm run build' and should NOT be committed
static/*/build/
static/*/dist/

# Alternative build directories (if used at root level)
dist/
build/

# ============================================
# Dependencies
# ============================================

# Root Node.js dependencies
node_modules/

# Frontend module dependencies
# Each Custom UI module has its own node_modules/
static/*/node_modules/

# pnpm
.pnpm-store/
static/*/.pnpm-store/

# Yarn
.yarn/
.pnp.*
.yarn/install-state.gz
static/*/.yarn/
static/*/.pnp.*

# ============================================
# Environment & Secrets
# ============================================

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Frontend environment files
static/*/.env
static/*/.env.local
static/*/.env.*.local

# Forge environment
.forge-env

# ============================================
# Development Tools
# ============================================

# Forge CLI
.tunnel

# Vite cache
static/*/.vite/

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea/
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# ============================================
# Operating System Files
# ============================================

# macOS
.DS_Store
.AppleDouble
.LSOverride

# Windows
Thumbs.db
Thumbs.db:encryptable
ehthumbs.db
ehthumbs_vista.db
*.stackdump
[Dd]esktop.ini

# Linux
*~

# ============================================
# Logs & Debugging
# ============================================

# Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# Frontend module logs
static/*/logs/
static/*/*.log

# Diagnostic reports
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# ============================================
# Testing
# ============================================

# Test coverage
coverage/
*.lcov
.nyc_output/

# Frontend test coverage
static/*/coverage/
static/*/.nyc_output/

# ============================================
# Temporary Files
# ============================================

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache
static/*/.eslintcache

# Optional stylelint cache
.stylelintcache
static/*/.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# parcel-bundler cache
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt

# Gatsby files
.cache/

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
```

---

## Directory Structure Context

This `.gitignore` assumes the following Forge structure:

```
my-forge-app/
├── .gitignore              # ← THIS FILE (root)
├── manifest.yml
├── package.json
├── node_modules/           # ✅ Ignored (root)
│
├── src/                    # Backend (committed)
│   └── index.ts
│
└── static/                 # Frontend modules
    ├── my-app/
    │   ├── .gitignore      # ← Optional: module-specific gitignore
    │   ├── package.json    # ✅ Committed
    │   ├── src/            # ✅ Committed (source code)
    │   ├── node_modules/   # ❌ Ignored
    │   └── build/          # ❌ Ignored (Vite output)
    │
    └── admin-panel/
        ├── package.json
        ├── src/
        ├── node_modules/   # ❌ Ignored
        └── build/          # ❌ Ignored
```

**Key Points**:
- ✅ **Commit**: Source code in `static/*/src/`, configs, package.json
- ❌ **Ignore**: Build outputs in `static/*/build/`, all `node_modules/`

---

## Optional: Frontend Module .gitignore

You can also create `static/<app>/.gitignore` for module-specific ignores:

```gitignore
# Frontend Module Gitignore (static/my-app/.gitignore)

# Build output (DO NOT COMMIT)
build/
dist/

# Dependencies
node_modules/

# Cache
.vite/
.eslintcache

# Logs
*.log

# Environment
.env.local
.env.*.local
```

---

## Verification Checklist

After creating `.gitignore`:

- [ ] File named `.gitignore` (with leading dot)
- [ ] Placed in project root directory
- [ ] Contains `static/*/build/` entry (with wildcard)
- [ ] Contains `static/*/node_modules/` entry
- [ ] Run `git status` to verify build outputs are ignored
- [ ] Commit `.gitignore` itself to repository

## Common Issues

### Issue: `static/*/build/` directory still tracked by git

**Problem**: Files in `static/*/build/` were committed before `.gitignore` was created.

**Solution**:
```bash
# Remove build directories from git tracking (keeps local files)
git rm -r --cached static/*/build/

# Also remove node_modules if committed
git rm -r --cached static/*/node_modules/

# Commit the removal
git add .gitignore
git commit -m "chore: add .gitignore and remove build artifacts from tracking"

# Verify
git status  # build/ and node_modules/ should not appear
```

### Issue: Wildcard not working

**Problem**: `static/*/build/` pattern doesn't ignore files.

**Solution**:
- Git glob patterns: `*` matches any characters except `/`
- `static/*/build/` correctly matches `static/my-app/build/`, `static/admin/build/`, etc.
- If not working, ensure git version > 1.8.2

### Issue: Build fails because directory doesn't exist

**Problem**: Vite tries to build to `static/<app>/build/` but directory doesn't exist.

**Solution**:
```bash
# Vite automatically creates the directory
cd static/my-app
npm run build

# Or create manually if needed
mkdir -p static/my-app/build
```

---

## Testing Your .gitignore

```bash
# 1. Build the frontend
cd static/my-app
npm run build
cd ../..

# 2. Check git status
git status

# Expected: build/ should NOT appear in untracked files

# 3. Test with dry-run
git add -n .

# Expected: Files in static/*/build/ should NOT be listed

# 4. Verify ignored files
git status --ignored

# Expected: Should show static/*/build/ under ignored files
```

---

## Related Files

- `vite.config.ts` - Configures build output to `build/` directory
- `manifest.yml` - References `static/<app>/build/` in resources
- `package.json` - Contains `build` scripts

## References

- [Git Documentation - .gitignore](https://git-scm.com/docs/gitignore)
- [Git Glob Patterns](https://git-scm.com/docs/gitignore#_pattern_format)
- [Forge Custom UI Architecture Guide](../../../docs/best-practices/forge-custom-ui-architecture.md)
- [forge-architect.prompt.md](../../../.github/prompts/forge-architect.prompt.md) - Directory structure decision
- [forge-implement.prompt.md](../../../.github/prompts/forge-implement.prompt.md) - Custom UI setup

# ============================================
# Dependencies
# ============================================

# Node.js dependencies
node_modules/

# pnpm
.pnpm-store/

# Yarn
.yarn/
.pnp.*
.yarn/install-state.gz

# ============================================
# Environment & Secrets
# ============================================

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Forge environment
.forge-env

# ============================================
# Development Tools
# ============================================

# Forge CLI
.tunnel

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea/
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# ============================================
# Operating System Files
# ============================================

# macOS
.DS_Store
.AppleDouble
.LSOverride

# Windows
Thumbs.db
Thumbs.db:encryptable
ehthumbs.db
ehthumbs_vista.db
*.stackdump
[Dd]esktop.ini

# Linux
*~

# ============================================
# Logs & Debugging
# ============================================

# Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# Diagnostic reports
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# ============================================
# Testing
# ============================================

# Test coverage
coverage/
*.lcov
.nyc_output/

# ============================================
# Temporary Files
# ============================================

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# parcel-bundler cache
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt

# Gatsby files
.cache/

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
```

---

## Verification Checklist

After creating `.gitignore`:

- [ ] File named `.gitignore` (with leading dot)
- [ ] Placed in project root directory
- [ ] Contains `static/` entry
- [ ] Contains `node_modules/` entry
- [ ] Run `git status` to verify `static/` is ignored
- [ ] Commit `.gitignore` itself to repository

## Common Issues

### Issue: `static/` directory still tracked by git

**Problem**: Files in `static/` were committed before `.gitignore` was created.

**Solution**:
```bash
# Remove static/ from git tracking (keeps local files)
git rm -r --cached static/

# Commit the removal
git add .gitignore
git commit -m "chore: add .gitignore and remove static/ from tracking"

# Verify
git status  # static/ should not appear
```

### Issue: Build fails because `static/` doesn't exist

**Problem**: Vite tries to build to `static/<app-name>/` but directory doesn't exist.

**Solution**:
```bash
# Vite automatically creates the directory
npm run build

# Or create manually if needed
mkdir -p static/my-app
```

## Related Files

- `vite.config.ts` - Configures build output to `static/<app-name>/`
- `manifest.yml` - References `static/<app-name>/` in resources
- `package.json` - Contains `build` script

## References

- [Git Documentation - .gitignore](https://git-scm.com/docs/gitignore)
- [Forge Custom UI](https://developer.atlassian.com/platform/forge/custom-ui/)
- [forge-architect.prompt.md](../../../.github/prompts/forge-architect.prompt.md) - Directory structure decision
- [forge-implement.prompt.md](../../../.github/prompts/forge-implement.prompt.md) - Custom UI setup
